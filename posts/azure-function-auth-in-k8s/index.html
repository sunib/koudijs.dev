<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Azure functions auth in k8s | koudijs.dev</title><meta name=keywords content="kubernetes,az-functions"><meta name=description content="On this docker hub page you can find all functions containers. This will allow you to run your Azure Functions inside kubernetes.
But how do you set this up? What things are not included?
Functions in Azure itself Azure functions make it very easy to run your pieces of code in Azure.
As I currently see it: Microsoft divided &lsquo;core&rsquo; functions from hosting functions. The GUI inside Azure allows you to:"><meta name=author content="Simon Koudijs"><link rel=canonical href=https://koudijs.dev/posts/azure-function-auth-in-k8s/><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://koudijs.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://koudijs.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://koudijs.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://koudijs.dev/apple-touch-icon.png><link rel=mask-icon href=https://koudijs.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.85.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://koudijs.dev/posts/"},{"@type":"ListItem","position":2,"name":"Azure functions auth in k8s","item":"https://koudijs.dev/posts/azure-function-auth-in-k8s/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Azure functions auth in k8s","name":"Azure functions auth in k8s","description":"On this docker hub page you can find all functions containers. This will allow you to run your Azure Functions inside kubernetes.\nBut how do you set this up? What things are not included?\nFunctions in Azure itself Azure functions make it very easy to run your pieces of code in Azure.\nAs I currently see it: Microsoft divided \u0026lsquo;core\u0026rsquo; functions from hosting functions. The GUI inside Azure allows you to:","keywords":["kubernetes","az-functions"],"articleBody":"On this docker hub page you can find all functions containers. This will allow you to run your Azure Functions inside kubernetes.\nBut how do you set this up? What things are not included?\nFunctions in Azure itself Azure functions make it very easy to run your pieces of code in Azure.\nAs I currently see it: Microsoft divided ‘core’ functions from hosting functions. The GUI inside Azure allows you to:\n Allows you to swap between different slots (but that switching actually causes short downtimes on your site, good topic for another blog) Use secrets from a keyvault in your application settings Host your function with custom domains Use keys to protect your HTTP functions with an api key  App keys protect all HTTP functions Function keys protect specific HTTP functions Functions use an attribute (HttpTrigger(AuthorizationLevel.Anonymous)) to define which exact access right they need (could be anonymous)    Support for keys Where the last function actuall is supported in the container as partly supported:\n https://github.com/Azure/azure-functions-host/issues/4147#issuecomment-477431016 https://martinbjorkstrom.com/posts/2020-02-12-testing-protected-azure-functions. https://docs.microsoft.com/en-us/azure/azure-functions/security-concepts#secret-repositories  But the question is: do you want it. Having calls between functions secured with keys is actually tedious work if you have multiple functions that call each other. You can also just secure the outside-in traffic by putting a key on your ingress.\n","wordCount":"209","inLanguage":"en","datePublished":"2022-02-11T14:02:56+01:00","dateModified":"2022-02-11T14:02:56+01:00","author":{"@type":"Person","name":"Simon Koudijs"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://koudijs.dev/posts/azure-function-auth-in-k8s/"},"publisher":{"@type":"Organization","name":"koudijs.dev","logo":{"@type":"ImageObject","url":"https://koudijs.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://koudijs.dev/ accesskey=h title="koudijs.dev (Alt + H)">koudijs.dev</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://koudijs.dev/about title=about><span>about</span></a></li><li><a href=https://koudijs.dev/posts title=posts><span>posts</span></a></li><li><a href=https://koudijs.dev/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://koudijs.dev/tags title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://koudijs.dev/>Home</a>&nbsp;»&nbsp;<a href=https://koudijs.dev/posts/>Posts</a></div><h1 class=post-title>Azure functions auth in k8s</h1><div class=post-meta>1 min · Simon Koudijs</div></header><div class=post-content><p>On this <a href=https://hub.docker.com/_/microsoft-azure-functions-base>docker hub page</a> you can find all functions containers. This will allow you to run your Azure Functions inside kubernetes.</p><p>But how do you set this up? What things are not included?</p><h2 id=functions-in-azure-itself>Functions in Azure itself<a hidden class=anchor aria-hidden=true href=#functions-in-azure-itself>#</a></h2><p><a href=https://docs.microsoft.com/en-us/azure/azure-functions/>Azure functions</a> make it very easy to run your pieces of code in Azure.</p><p>As I currently see it: Microsoft divided &lsquo;core&rsquo; functions from hosting functions. The GUI inside Azure allows you to:</p><ul><li>Allows you to swap between different slots (but that switching actually causes short downtimes on your site, good topic for another blog)</li><li>Use secrets from a keyvault in your application settings</li><li>Host your function with custom domains</li><li>Use keys to protect your HTTP functions with an <a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-bindings-http-webhook-trigger?tabs=csharp#api-key-authorization">api key</a><ul><li>App keys protect all HTTP functions</li><li>Function keys protect specific HTTP functions</li><li>Functions use an attribute (<code>HttpTrigger(AuthorizationLevel.Anonymous)</code>) to define which exact access right they need (could be anonymous)</li></ul></li></ul><h2 id=support-for-keys>Support for keys<a hidden class=anchor aria-hidden=true href=#support-for-keys>#</a></h2><p>Where the last function actuall <em>is</em> supported in the container as partly supported:</p><ul><li><a href=https://github.com/Azure/azure-functions-host/issues/4147#issuecomment-477431016>https://github.com/Azure/azure-functions-host/issues/4147#issuecomment-477431016</a></li><li><a href=https://martinbjorkstrom.com/posts/2020-02-12-testing-protected-azure-functions>https://martinbjorkstrom.com/posts/2020-02-12-testing-protected-azure-functions</a>.</li><li><a href=https://docs.microsoft.com/en-us/azure/azure-functions/security-concepts#secret-repositories>https://docs.microsoft.com/en-us/azure/azure-functions/security-concepts#secret-repositories</a></li></ul><p>But the question is: do you want it. Having calls between functions secured with keys is actually tedious work if you have multiple functions that call each other. You can also just secure the outside-in traffic by putting <a href=https://koudijs.dev/posts/ingress-api-key/>a key on your ingress</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://koudijs.dev/tags/kubernetes/>kubernetes</a></li><li><a href=https://koudijs.dev/tags/az-functions/>az-functions</a></li></ul><nav class=paginav><a class=prev href=https://koudijs.dev/posts/ingress-api-key/><span class=title>« Prev Page</span><br><span>Ingress API key</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://koudijs.dev/>koudijs.dev</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>